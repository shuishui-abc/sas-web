{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ROG/Desktop/sas/sas-web/pages/result.js"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\r\nimport Head from \"next/head\";\r\n\r\nfunction getLevelByScore(s) {\r\n  if (s >= 70) return { key: \"severe\", text: \"重度\", range: \"≥ 70\" };\r\n  if (s >= 60) return { key: \"moderate\", text: \"中度\", range: \"60–69\" };\r\n  if (s >= 50) return { key: \"mild\", text: \"轻度\", range: \"50–59\" };\r\n  return { key: \"normal\", text: \"正常\", range: \"< 50\" };\r\n}\r\n\r\nexport default function ResultPage() {\r\n  const [data, setData] = useState(null);\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  const id = useMemo(() => {\r\n    if (typeof window === \"undefined\") return \"\";\r\n    const u = new URL(window.location.href);\r\n    return u.searchParams.get(\"id\") || \"\";\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n\r\n    (async () => {\r\n      try {\r\n        const res = await fetch(`/api/sas_result?id=${encodeURIComponent(id)}`);\r\n        const json = await res.json();\r\n        if (!res.ok) throw new Error(json?.error || \"获取结果失败\");\r\n        setData(json);\r\n      } catch (e) {\r\n        setErr(e.message);\r\n      }\r\n    })();\r\n  }, [id]);\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>测评结果</title>\r\n        <link rel=\"stylesheet\" href=\"/css/style.css\" />\r\n      </Head>\r\n\r\n      <div className=\"container\">\r\n        <div className=\"card\">\r\n          <div className=\"h1\">测评结果</div>\r\n          <p className=\"p\">以下结果仅供参考，如有明显不适建议咨询专业人士。</p>\r\n\r\n          {!id ? <p className=\"p\">缺少结果 id</p> : null}\r\n          {err ? <p className=\"p\">错误：{err}</p> : null}\r\n\r\n          {!data ? (\r\n            <p className=\"p\">加载中…</p>\r\n          ) : (\r\n            <>\r\n              <div className=\"row\">\r\n                <span className=\"badge\">原始分：{data.raw_score}</span>\r\n                <span className=\"badge\">标准分：{data.standard_score}</span>\r\n                <span className=\"badge\">\r\n                  等级：{data.level || getLevelByScore(Number(data.standard_score)).text}\r\n                </span>\r\n              </div>\r\n\r\n              {/* 绿色分级条（轻/中/重） */}\r\n              {(() => {\r\n                const s = Number(data.standard_score);\r\n                const lv = getLevelByScore(s);\r\n                const strong =\r\n                  lv.key === \"mild\" ? 0 : lv.key === \"moderate\" ? 1 : lv.key === \"severe\" ? 2 : -1;\r\n\r\n                return (\r\n                  <div className=\"scaleBar\">\r\n                    <div className=\"scaleBarTop\">\r\n                      <div className={`scaleSeg ${strong === 0 ? \"scaleSegStrong\" : \"\"}`}>\r\n                        轻度（50–59）\r\n                      </div>\r\n                      <div className={`scaleSeg ${strong === 1 ? \"scaleSegStrong\" : \"\"}`}>\r\n                        中度（60–69）\r\n                      </div>\r\n                      <div className={`scaleSeg ${strong === 2 ? \"scaleSegStrong\" : \"\"}`}>\r\n                        重度（≥ 70）\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"scaleBarBottom\">\r\n                      <span className=\"scalePill\">\r\n                        标准分：<b style={{ color: \"inherit\" }}>{data.standard_score}</b>\r\n                      </span>\r\n                      <span className={`scalePill ${strong >= 0 ? \"scalePillStrong\" : \"\"}`}>\r\n                        分级：{lv.text}（{lv.range}）\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}